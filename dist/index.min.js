"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var nanoDom=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=["input","link","meta","hr","br","source","img"];function r(e,t){if(!((t=(t||"").trim()).length<=0)){for(var n=[],i=0,o=t.charCodeAt(i);o>=65&&o<=90||o>=97&&o<=122||o>=48&&o<=57||58===o||45===o||95===o;)n[1]=(n[1]||"")+t.charAt(i),o=t.charCodeAt(++i);if("="===(t=t.substr(i).trim())[0]){if('"'===(t=t.substr(1).trim())[0]||"'"===t[0]){for(i=1;t[i]!==t[0];)n[2]=(n[2]||"")+t[i],i+=1;t=t.substr(i+1)}else n[2]=t.split(" ")[0],t=t.split(" ").slice(1).join(" ");return e.setAttribute(n[1],n[2]),"class"===n[1]?e.classList.add(n[2]):"title"!==n[1]&&"id"!==n[1]&&"name"!==n[1]||(e[n[1]]=n[2]),r(e,t)}e.setAttribute(n[1],n[1]),r(e,t)}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=null;if(t<0&&(t=e.indexOf("<")),t>=0&&t<e.length){(n=[]).index=t,"/"===e[t+=1]&&(n[1]="/",t+=1);for(var r=e.charCodeAt(t);r>=65&&r<=90||r>=97&&r<=122||r>=48&&r<=57||58===r||45===r||95===r;)n[2]=(n[2]||"")+e.charAt(t),r=e.charCodeAt(++t);if(!n[2])return i(e,e.indexOf("<",t));for(var o=t;t<e.length&&">"!==e[t];)t++;if(t<e.length){var s=t;"/"===e[t-1]&&(n[4]="/",s=t-1),s-o>1&&(n[3]=e.substring(o,s))}n[0]=e.substring(n.index,t+1)}return n}var o=[];function s(e,t,a){for(var l=void 0;l=i(t);){if(l[1]){if(0===o.length)throw new Error("Unexpected closing tag "+l[2]);var u=o.pop();if(u!==l[2])throw new Error("Unexpected closing tag "+l[2]+"; expected "+u);var c=t.substring(0,l.index);return c&&a.appendChild(e.createTextNode(c)),t.substr(l.index+l[0].length)}var h=t.substring(0,l.index);h&&a.appendChild(e.createTextNode(h));var d=e.createElement(l[2]);r(d,l[3]),!l[4]&&n.indexOf(l[2])<0?(o.push(l[2]),t=s(e,t.substr(l.index+l[0].length),d)):t=t.substr(l.index+l[0].length),a.appendChild(d)}if(o.length>0)throw new Error("Unclosed tag"+(o.length>1?"s ":" ")+o.join(", "));return t.length>0&&a.appendChild(e.createTextNode(t)),t}var a=function(e){return new RegExp("(^| )"+e+"( |$)")},l=function(e,t,n){for(var r=0;r<e.length;r++)t.call(n,e[r])};function u(e){this.element=e}function c(e,t){var n=[];return e.children.forEach(function(e){n=n.concat(t(e)?e:[],c(e,t))}),n}function h(e,t){this.nodeType=1,this.nodeName=e,this.tagName=e,this.className="",this.childNodes=[],this.style={},this.ownerDocument=t,this.parentNode=null,this.attributes=[]}function d(e,t){this.nodeValue=e,this.nodeType=3,this.parentNode=null,this.ownerDocument=t}u.prototype={add:function(){l(arguments,function(e){this.contains(e)||(this.element.className+=this.element.className.length>0?" "+e:e)},this)},remove:function(){l(arguments,function(e){this.element.className=this.element.className.replace(a(e),"")},this)},toggle:function(e){return this.contains(e)?(this.remove(e),!1):(this.add(e),!0)},contains:function(e){return a(e).test(this.element.className)},replace:function(e,t){this.remove(e),this.add(t)}},Object.defineProperty(h.prototype,"children",{get:function(){return this.childNodes.filter(function(e){return 1===e.nodeType})}}),Object.defineProperty(h.prototype,"classList",{get:function(){return new u(this)}}),Object.defineProperty(h.prototype,"innerHTML",{get:function(){return this.childNodes.map(function(e){return 1===e.nodeType?e.outerHTML:e.nodeValue}).join("")},set:function(e){this.childNodes=[],o=[],s(this.ownerDocument,e,this)}}),Object.defineProperty(h.prototype,"outerHTML",{get:function(){var e=this;"[object Array]"!==Object.prototype.toString.call(this.attributes)&&(this.attributes=Object.keys(this.attributes).map(function(t){return{name:t,value:e.attributes[t]}}),this.attributes.forEach(function(t,n,r){e.attributes[t.name]=t.value}));var t=this.attributes.map(function(e){return e.name+'="'+(void 0===e.value?"":e.value)+'"'}).join(" ");return n.indexOf(this.tagName)>=0?"<"+this.tagName+(t?" "+t:"")+"/>":"<"+this.tagName+(t?" "+t:"")+">"+this.innerHTML+"</"+this.tagName+">"}}),h.prototype.appendChild=function(e){this.childNodes.push(e),e.parentNode=this},h.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);t>=0&&this.childNodes.splice(t,1)},h.prototype.setAttribute=function(e,t){var n={name:e,value:t};this.attributes[e]?this.attributes[this.attributes.indexOf(this.attributes[e])]=n:this.attributes.push(n),this.attributes[e]=n,"class"===e&&(this.className=t)},h.prototype.removeAttribute=function(e){var t=this.attributes.indexOf(this.attributes[e]);t>=0&&this.attributes.splice(t,1),delete this.attributes[e]},h.prototype.getAttribute=function(e){return this.attributes[e]&&this.attributes[e].value||""},h.prototype.replaceChild=function(e,t){var n=this.childNodes.indexOf(t);this.childNodes.splice(n,1,e),e.parentNode=this},h.prototype.addEventListener=function(){},h.prototype.removeEventListener=function(){},h.prototype.getElementsByTagName=function(e){return c(this,function(t){return t.tagName===e})},h.prototype.getElementsByClassName=function(e){return c(this,function(t){return t.classList.contains(e)})},h.prototype.querySelectorAll=function(e){return c(this,function(t){return function(e,t){var n=t.split(/\s*,\s*/);for(var r in n)if(n[r].match(/(?:([\w*:_-]+)?\[([\w:_-]+)(?:(\$|\^|\*)?=(?:(?:'([^']*)')|(?:"([^"]*)")))?\])|(?:\.([\w_-]+))|([\w*:_-]+)/g)){var i=RegExp.$4||RegExp.$5;if(RegExp.$7===e.tagName||"*"===RegExp.$7)return!0;if(RegExp.$6&&e.classList.contains(RegExp.$6))return!0;if(RegExp.$1&&e.tagName!==RegExp.$1)continue;var o=e.getAttribute(RegExp.$2);if(!RegExp.$3&&!i&&void 0!==e.attributes[RegExp.$2])return!0;if(!RegExp.$3&&i&&o===i)return!0;if(RegExp.$3&&"^"===RegExp.$3&&0===o.indexOf(i))return!0;if(RegExp.$3&&"$"===RegExp.$3&&o.match(new RegExp(i+"$")))return!0;if(RegExp.$3&&"*"===RegExp.$3&&o.indexOf(i)>=0)return!0}return!1}(t,e)})},h.prototype.getElementById=function(e){return c(this,function(t){return t.getAttribute("id")===e})[0]},e.exports=function e(t){var n=this;if(!this instanceof e)return new e(t);this.createElement=function(e){return new h(e,n)},this.createTextNode=function(e){return new d(e,n)},this.getElementById=h.prototype.getElementById.bind(this),this.getElementsByTagName=h.prototype.getElementsByTagName.bind(this),this.getElementsByClassName=h.prototype.getElementsByClassName.bind(this),this.querySelectorAll=h.prototype.querySelectorAll.bind(this),this.addEventListener=function(){},this.removeEventListener=function(){},this.documentElement=this.createElement("html"),this.childNodes=[this.documentElement],this.children=[this.documentElement],this.nodeType=9,"string"!=typeof t||t.trim().indexOf("<!DOCTYPE")<0?(this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),"string"==typeof t&&(o=[],s(this,t,this.body))):(t.match(/<html([^>]*)>/),RegExp.$1&&r(this.documentElement,RegExp.$1),t=t.replace(/<!DOCTYPE[^>]+>[\n\s]*<html([^>]*)>/g,"").replace(/<\/html>/g,""),o=[],s(this,t,this.documentElement),this.head=this.getElementsByTagName("head")[0],this.body=this.getElementsByTagName("body")[0])},e.exports.DOMElement=h,e.exports.DOMText=d,void 0!==commonjsGlobal&&(commonjsGlobal.HTMLElement=h)});unwrapExports(nanoDom);var nanoDom_1=nanoDom.DOMElement,nanoDom_2=nanoDom.DOMText;let tagKey=0;const NODE_TYPE_TAG=1,NODE_TYPE_TEXT=3;function render(e,t,n={},r={}){return traverseToVdom(e,parseHTMLToDOM(t),n,r)}function parseHTMLToDOM(e){return new nanoDom(e).body.children}function traverseToVdom(e,t,n={},r={}){if(Array.isArray(t))return t.filter(e=>e).map(t=>traverseToVdom(e,t,n,r));if(t){var i,o=t.nodeType,s=t.tagName,a=t.childNodes;if(delete t.parentNode,o==NODE_TYPE_TAG){let o=attrs(t.attributes),l=Object.keys(r).find(e=>s.toLowerCase()===e.toLowerCase());l&&(s=r[l]),Object.keys(o).forEach(function(e){let t=o[e],r=Object.keys(n).find(e=>e===t);r&&(o[e]=n[r],delete n[r])}),a=a.map(e=>{let t=e.nodeValue;return"string"!=typeof t?e:(n[t]&&(e.nodeValue=n[t],delete n[t]),e)}),void 0===o.key&&(o.key="__jsx-tmpl-key-"+ ++tagKey);let u=a.map(t=>traverseToVdom(e,t,n,r));i=e(s,o,u.length>0?u:null)}else o==NODE_TYPE_TEXT&&(i=replacePropsInTextNode(t.nodeValue,n));return i}}const REGEX_ONLY_EMPTY_SPACES=/^\s+$/;function replacePropsInTextNode(e,t){let n=[];return Object.keys(t).forEach(r=>{if(e.toString().includes(r)){let i=e.toString().split(r);i.splice(1,0,t[r]),n=n.concat(i),delete t[r]}}),0===n.length&&(n=[e]),n.map(e=>"string"!=typeof e?e:(e=e.replace("\n","").replace(/\s+/g," "),REGEX_ONLY_EMPTY_SPACES.test(e)?null:e)).filter(e=>e)}function attrs(e){if(isEmptyObject(e))return{};var t={};for(let n,r=0,i=e.length;n=e[r],r<i;r+=1)"class"==n.name?t.className=n.value:"for"==n.name?t.htmlFor=n.value:t[n.name]=n.value;return t}function isEmptyObject(e){return 0===Object.getOwnPropertyNames(e).length}var client={render:render},client_1=client.render;function hash(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}var stringHash=hash;const tmplCache={};function templateValueToJSX(e){if(void 0===e||null===e)return"";if(e instanceof Array){return e.map(e=>templateValueToJSX(e)).join("")}return e.toString()}function getJSXTag(e,t){const n=e.h||e.createElement||e;return function(e,...r){let i="",o=0,s={};for(o=0;o<r.length;o++){let t,n=r[o];if("string"!=typeof n){let e=getPropPlaceholder(n);s[e]=n,t=e}void 0===t&&(t=templateValueToJSX(n)),i+=e[o]+t}return jsxTmplResult(i=(i+=e[o]).trimRight(),s,n,t)}}function jsxTmplResult(e,t,n,r){let i=stringHash(e);if(void 0!==tmplCache[i])return tmplCache[i].fromCache=!0,tmplCache[i];let o=client_1(n,e,t,r).shift();return tmplCache[i]=o,o}let propIncrement=0;function getPropPlaceholder(e){return"[["+((e&&(e.name||e.constructor.name)||typeof e)+"_"+ ++propIncrement)+"]]"}exports.getJSXTag=getJSXTag;